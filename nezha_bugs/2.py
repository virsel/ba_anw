def abnormal_pattern_ranker(normal_pattern_dict, abnormal_pattern_dict, min_score=0.67):
    score_dict = {}
    for key in abnormal_pattern_dict.keys():
        if abnormal_pattern_dict[key] > 5:
            if key not in score_dict.keys():
                score_dict[key] = 0
            if key in normal_pattern_dict.keys():
                score_dict[key] = 1.0 * abnormal_pattern_dict[key] / \
                    (abnormal_pattern_dict[key] + normal_pattern_dict[key])
                # print(abnormal_pattern_dict[key],
                #       normal_pattern_dict[key], score_dict[key])
            else:
                score_dict[key] = 1.0

    move_list = set()
    for key, value in score_dict.items():
        # only consider score > 0.66, i.e., 1 / 1 + 0.5
        if float(value) < min_score:
            # logger.info("move key %s because score %s < 0.66" % (key, value))
            move_list.add(key)
    for item in move_list:
        score_dict.pop(item)

    score_dict = sorted(score_dict, reverse=True) #!!!
    # sortierung nicht nach score sondern nach event ids absteigend:
    # {'77_78': 1.0, '106_21': 0.5183962264150943, '21_107': 0.5183962264150943, '100_19': 0.510747185261003, '19_22': 0.510747185261003, '22_101': 0.510747185261003, '77_84': 1.0, '84_85': 0.5183962264150943, '84_104': 0.5183962264150943, '104_20': 0.5183962264150943, '20_23': 0.5183962264150943, '23_105': 0.5183962264150943, '76_1': 0.5014955134596212, '4_77': 0.5014955134596212, '77_197': 1.0, '77_80': 1.0, '77_82': 1.0, '77_86': 1.0, '77_88': 1.0, '77_124': 1.0, '1_2': 0.5284552845528455, '2_3': 0.5284552845528455, '3_4': 0.5284552845528455, '77_167': 1.0, '167_168': 0.5284552845528455, '167_169': 0.5284552845528455, '169_5': 0.5284552845528455, '5_170': 0.5284552845528455, '1_41': 0.5315315315315315, '41_16': 0.5315315315315315, '17_42': 0.5315315315315315, '42_4': 0.5315315315315315, '77_134': 1.0, '134_135': 0.5315315315315315, '134_92': 0.5315315315315315, '118_43': 0.5315315315315315, '43_208': 0.5315315315315315, '208_28': 0.5315315315315315, '119_136': 0.5315315315315315, '136_27': 0.5315315315315315, '27_137': 0.5315315315315315, '137_198': 0.5315315315315315, '137_122': 0.5315315315315315, '1_39': 0.5797101449275363, '39_40': 0.5797101449275363, '40_4': 0.5797101449275363, '77_140': 1.0}
    # wird zu:
    # ['84_85', '84_104', '77_88', '77_86', '77_84', '77_82', '77_80', '77_78', '77_197', '77_167', '77_140', '77_134', '77_124', '76_1', '5_170', '4_77', '43_208', '42_4', '41_16', '40_4', '3_4', '39_40', '2_3', '27_137', '23_105', '22_101', '21_107', '20_23', '208_28', '1_41', '1_39', '1_2', '19_22', '17_42', '169_5', '167_169', '167_168', '137_198', '137_122', '136_27', '134_92', '134_135', '119_136', '118_43', '106_21', '104_20', '100_19']

    return score_dict